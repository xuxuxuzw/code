(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-118ae0a6"],{"1e67":function(t,e,r){},2269:function(t,e,r){"use strict";var n=r("1e67"),a=r.n(n);a.a},"6fd3":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{scrollable:"",title:"添加商品规格",width:"950"},on:{"on-cancel":t.onCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[r("Form",{ref:"formDynamic",staticClass:"attrFrom",attrs:{model:t.formDynamic,rules:t.rules,"label-width":95,"label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[r("Row",{attrs:{gutter:24}},[r("Col",{attrs:{span:"24"}},[r("Col",{staticClass:"mb15",attrs:{span:"8"}},[r("FormItem",{attrs:{label:"标题名称：",prop:"rule_name"}},[r("Input",{attrs:{placeholder:"请输入标题名称"},model:{value:t.formDynamic.rule_name,callback:function(e){t.$set(t.formDynamic,"rule_name",e)},expression:"formDynamic.rule_name"}})],1)],1)],1),t._l(t.formDynamic.spec,(function(e,n){return r("Col",{key:n,staticClass:"noForm",attrs:{span:"23"}},[r("FormItem",[r("div",{staticClass:"acea-row row-middle"},[r("span",{staticClass:"mr5"},[t._v(t._s(e.value))]),r("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.handleRemove(n)}}})],1),r("div",{staticClass:"rulesBox"},[t._l(e.detail,(function(n,a){return r("Tag",{key:a,staticClass:"mb5",attrs:{type:"dot",closable:"",color:"primary",name:n},on:{"on-close":function(r){return t.handleRemove2(e.detail,a)}}},[t._v(t._s(n))])})),r("Input",{staticStyle:{width:"150px"},attrs:{search:"","enter-button":"添加",placeholder:"请输入属性名称"},on:{"on-search":function(r){return t.createAttr(e.detail.attrsVal,n)}},model:{value:e.detail.attrsVal,callback:function(r){t.$set(e.detail,"attrsVal",r)},expression:"item.detail.attrsVal"}})],2)])],1)})),t.isBtn?r("Col",{staticClass:"mt10",attrs:{span:"24"}},[r("Col",{staticClass:"mr15",attrs:{span:"8"}},[r("FormItem",{attrs:{label:"规格名称："}},[r("Input",{attrs:{placeholder:"请输入规格"},model:{value:t.attrsName,callback:function(e){t.attrsName=e},expression:"attrsName"}})],1)],1),r("Col",{staticClass:"mr20",attrs:{span:"8"}},[r("FormItem",{attrs:{label:"规格值："}},[r("Input",{attrs:{placeholder:"请输入规格值"},model:{value:t.attrsVal,callback:function(e){t.attrsVal=e},expression:"attrsVal"}})],1)],1),r("Col",{attrs:{span:"2"}},[r("Button",{attrs:{type:"primary"},on:{click:t.createAttrName}},[t._v("确定")])],1),r("Col",{attrs:{span:"2"}},[r("Button",{on:{click:t.offAttrName}},[t._v("取消")])],1)],1):t._e(),t.spinShow?r("Spin",{attrs:{size:"large",fix:""}}):t._e()],2),t.isBtn?t._e():r("Button",{staticClass:"ml95 mt10",attrs:{type:"primary",icon:"md-add"},on:{click:t.addBtn}},[t._v("添加新规格")])],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:t.modal_loading},on:{click:function(e){return t.handleSubmit("formDynamic")}}},[t._v("确定")])],1)],1)},a=[],o=(r("7f7f"),r("c4c8")),c={name:"addAttr",data:function(){return{spinShow:!1,modal_loading:!1,grid:{xl:3,lg:3,md:12,sm:24,xs:24},modal:!1,index:1,rules:{rule_name:[{required:!0,message:"请输入规格名称",trigger:"blur"}]},formDynamic:{rule_name:"",spec:[]},attrsName:"",attrsVal:"",formDynamicNameData:[],isBtn:!1,formDynamicName:[],results:[],result:[],ids:0}},computed:{},methods:{onCancel:function(){this.clear()},addBtn:function(){this.isBtn=!0},getIofo:function(t){var e=this;this.spinShow=!0,this.ids=t.id,Object(o["w"])(t.id).then((function(t){e.formDynamic=t.data.info,e.spinShow=!1})).catch((function(t){e.spinShow=!1,e.$Message.error(t.msg)}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){return!!t&&(0===e.formDynamic.spec.length?e.$Message.warning("请至少添加一条商品规格！"):(e.modal_loading=!0,void setTimeout((function(){Object(o["v"])(e.formDynamic,e.ids).then((function(t){e.$Message.success(t.msg),setTimeout((function(){e.modal=!1,e.modal_loading=!1}),500),setTimeout((function(){e.$emit("getList"),e.clear()}),600)})).catch((function(t){e.modal_loading=!1,e.$Message.error(t.msg)}))}),1200)))}))},clear:function(){this.$refs["formDynamic"].resetFields(),this.formDynamic.spec=[],this.isBtn=!1,this.attrsName="",this.attrsVal=""},offAttrName:function(){this.isBtn=!1},handleRemove:function(t){this.formDynamic.spec.splice(t,1)},handleRemove2:function(t,e){t.splice(e,1)},createAttrName:function(){if(this.attrsName&&this.attrsVal){var t={value:this.attrsName,detail:[this.attrsVal]};this.formDynamic.spec.push(t);var e={};this.formDynamic.spec=this.formDynamic.spec.reduce((function(t,r){return!e[r.value]&&(e[r.value]=t.push(r)),t}),[]),this.attrsName="",this.attrsVal="",this.isBtn=!1}else this.$Message.warning("请添加规格名称")},createAttr:function(t,e){if(t){this.formDynamic.spec[e].detail.push(t);var r={};this.formDynamic.spec[e].detail=this.formDynamic.spec[e].detail.reduce((function(t,e){return!r[e]&&(r[e]=t.push(e)),t}),[])}else this.$Message.warning("请添加属性")}}},i=c,s=(r("2269"),r("2877")),u=Object(s["a"])(i,n,a,!1,null,"1f4d12e6",null);e["a"]=u.exports},"7f08":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Form",{ref:"artFrom",staticClass:"tabform",attrs:{model:t.artFrom,"label-width":80,"label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[r("Row",{attrs:{gutter:24,type:"flex",justify:"end"}},[r("Col",{staticClass:"ivu-text-left",attrs:{span:"24"}},[r("FormItem",{attrs:{label:"规格搜索："}},[r("Input",{staticStyle:{width:"30%"},attrs:{search:"","enter-button":"",placeholder:"请输入规格"},on:{"on-search":t.userSearchs},model:{value:t.artFrom.rule_name,callback:function(e){t.$set(t.artFrom,"rule_name",e)},expression:"artFrom.rule_name"}})],1)],1),r("Col",{attrs:{span:"24"}},[r("Button",{directives:[{name:"auth",rawName:"v-auth",value:["product-rule-save"],expression:"['product-rule-save']"}],staticClass:"mr20",attrs:{type:"primary",icon:"md-add"},on:{click:t.addAttr}},[t._v("添加商品规格")]),r("Button",{directives:[{name:"auth",rawName:"v-auth",value:["product-product-rule-delete"],expression:"['product-product-rule-delete']"}],on:{click:function(e){return t.del(null,"批量删除规格")}}},[t._v("批量删除")])],1)],1)],1),r("Table",{ref:"selection",staticClass:"mt25",attrs:{columns:t.columns4,data:t.tableList,loading:t.loading,"highlight-row":"","no-data-text":"暂无数据","no-filtered-data-text":"暂无筛选结果"},on:{"on-selection-change":t.onSelectTab},scopedSlots:t._u([{key:"attr_value",fn:function(e){var n=e.row;return t._l(n.attr_value,(function(e,n){return r("span",{key:n,staticStyle:{display:"block"},domProps:{textContent:t._s(e)}})}))}},{key:"action",fn:function(e){var n=e.row;return[r("a",{on:{click:function(e){return t.edit(n)}}},[t._v("编辑")]),r("Divider",{attrs:{type:"vertical"}}),r("a",{on:{click:function(e){return t.del(n,"删除规格")}}},[t._v("删除")])]}}])}),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:t.total,current:t.artFrom.page,"show-elevator":"","show-total":"","page-size":t.artFrom.limit},on:{"on-change":t.pageChange}})],1)],1),r("add-attr",{ref:"addattr",on:{getList:t.userSearchs}})],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"i-layout-page-header"},[r("div",{staticClass:"i-layout-page-header"},[r("span",{staticClass:"ivu-page-header-title"},[t._v("商品规格")])])])}],o=(r("8e6e"),r("ac6a"),r("456d"),r("ade3")),c=r("2f62"),i=r("6fd3"),s=r("c4c8");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d={name:"productAttr",components:{addAttr:i["a"]},data:function(){return{loading:!1,artFrom:{page:1,limit:15,rule_name:""},columns4:[{type:"selection",width:60},{title:"ID",key:"id",width:80},{title:"规格名称",key:"rule_name",minWidth:150},{title:"商品规格",key:"attr_name",minWidth:250},{title:"商品属性",slot:"attr_value",minWidth:300},{title:"操作",slot:"action",fixed:"right",minWidth:120}],tableList:[],total:0,ids:"",selectionList:[]}},computed:l({},Object(c["e"])("admin/order",["orderChartType"])),created:function(){this.getDataList()},methods:{onSelectTab:function(t){this.selectionList=t;var e=[];this.selectionList.map((function(t){e.push(t.id)})),this.ids=e.join(",")},del:function(t,e){var r=this,n={};if("批量删除规格"===e){if(0===this.selectionList.length)return this.$Message.warning("请选择要删除的规格！");n={ids:this.ids}}else n={ids:t.id};var a={title:e,num:0,url:"product/product/rule/delete",method:"DELETE",ids:n};this.$modalSure(a).then((function(t){r.$Message.success(t.msg),r.getDataList()})).catch((function(t){r.$Message.error(t.msg)}))},addAttr:function(){this.$refs.addattr.modal=!0},edit:function(t){this.$refs.addattr.modal=!0,this.$refs.addattr.getIofo(t)},getDataList:function(){var t=this;this.loading=!0,Object(s["x"])(this.artFrom).then((function(e){var r=e.data;t.tableList=r.list,t.total=e.data.count,t.loading=!1})).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},pageChange:function(t){this.artFrom.page=t,this.getDataList()},userSearchs:function(){this.artFrom.page=1,this.getDataList()}}},m=d,f=r("2877"),p=Object(f["a"])(m,n,a,!1,null,"f56a5bb6",null);e["default"]=p.exports},c4c8:function(t,e,r){"use strict";r.d(e,"h",(function(){return a})),r.d(e,"i",(function(){return o})),r.d(e,"a",(function(){return c})),r.d(e,"s",(function(){return i})),r.d(e,"t",(function(){return s})),r.d(e,"B",(function(){return u})),r.d(e,"q",(function(){return l})),r.d(e,"k",(function(){return d})),r.d(e,"r",(function(){return m})),r.d(e,"l",(function(){return f})),r.d(e,"m",(function(){return p})),r.d(e,"z",(function(){return h})),r.d(e,"b",(function(){return g})),r.d(e,"u",(function(){return b})),r.d(e,"y",(function(){return v})),r.d(e,"d",(function(){return y})),r.d(e,"e",(function(){return _})),r.d(e,"g",(function(){return O})),r.d(e,"x",(function(){return j})),r.d(e,"v",(function(){return w})),r.d(e,"w",(function(){return C})),r.d(e,"f",(function(){return D})),r.d(e,"n",(function(){return k})),r.d(e,"p",(function(){return x})),r.d(e,"o",(function(){return S})),r.d(e,"A",(function(){return $})),r.d(e,"c",(function(){return F})),r.d(e,"j",(function(){return P}));var n=r("6b6c");function a(){return Object(n["a"])({url:"product/product/type_header",method:"get"})}function o(t){return Object(n["a"])({url:"product/product",method:"get",params:t})}function c(t,e){return Object(n["a"])({url:"product/product/set_show/".concat(t,"/").concat(e),method:"put"})}function i(t){return Object(n["a"])({url:"product/product/product_show",method:"put",data:t})}function s(t){return Object(n["a"])({url:"product/product/product_unshow",method:"put",data:t})}function u(t){return Object(n["a"])({url:"product/category/tree/".concat(t),method:"get"})}function l(t){return Object(n["a"])({url:"product/product/".concat(t),method:"get"})}function d(t){return Object(n["a"])({url:"product/product/".concat(t.id),method:"POST",data:t})}function m(t){return Object(n["a"])({url:"product/category",method:"get",params:t})}function f(){return Object(n["a"])({url:"product/category/create",method:"get"})}function p(t){return Object(n["a"])({url:"product/category/".concat(t),method:"get"})}function h(t){return Object(n["a"])({url:"product/category/set_show/".concat(t.id,"/").concat(t.is_show),method:"PUT"})}function g(t){return Object(n["a"])({url:"product/product/list",method:"GET",params:t})}function b(t){return Object(n["a"])({url:"product/reply",method:"get",params:t})}function v(t,e){return Object(n["a"])({url:"product/reply/set_reply/".concat(e),method:"PUT",data:t})}function y(t){return Object(n["a"])({url:"product/copy",method:"POST",data:t})}function _(t){return Object(n["a"])({url:"product/crawl/save",method:"POST",data:t})}function O(t,e,r){return Object(n["a"])({url:"product/generate_attr/".concat(e,"/").concat(r),method:"POST",data:t})}function j(t){return Object(n["a"])({url:"product/product/rule",method:"GET",params:t})}function w(t,e){return Object(n["a"])({url:"product/product/rule/".concat(e),method:"POST",data:t})}function C(t){return Object(n["a"])({url:"product/product/rule/".concat(t),method:"get"})}function D(t){return Object(n["a"])({url:"product/reply/fictitious_reply/".concat(t),method:"get"})}function k(){return Object(n["a"])({url:"product/product/get_rule",method:"get"})}function x(){return Object(n["a"])({url:"product/product/get_template",method:"get"})}function S(){return Object(n["a"])({url:"product/product/get_temp_keys",method:"get"})}function $(t){return Object(n["a"])({url:"export/storeProduct",method:"get",params:t})}function F(t){return Object(n["a"])({url:"product/product/check_activity/".concat(t),method:"get"})}function P(){return Object(n["a"])({url:"user/user_label",method:"get"})}}}]);